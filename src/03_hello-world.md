# 第三章 你好，世界！（开始开发，程序结构）

这次我们将通过一个仅显示 Hello, World! 的经典程序，学习如何开始编程以及基本的工作流程。

## 3.1 程序与代码

“编写程序的文本”有时会强调其文本特性，被称为“源代码”或“代码”。这些术语大致是同一个意思，请根据需要进行替换。

## 3.2 创建放程序的地方

首先需要一个编写程序的地方。我们来创建一个新的目录。名字随便起，但暂时这一章用 hello 当名字。创建后，在 VSCode 中打开它。

![hello_folder](03_hello-world.assets/hello_folder.png)

## 3.3 初始化模块

打开目录后，接下来初始化模块。关于模块的内容稍后会进行说明，请打开终端并输入以下命令。

```Bash
go mod init hello
```

如果在资源管理器中生成了名为 go.mod 的文件（红框），则模块初始化成功。  
如果不成功，可能是命令敲错了、Go 安装失败，或者当前目录与 VSCode 打开的目录不同。

![hello-2.png](03_hello-world.assets/go.mod.png)

## 3.4 编写程序

好了，现在我们有了放程序的地方。  
接下来创建文件。方法可以有很多，但在这里我们选择在 VSCode 的资源管理器上空白处右键点击，然后点击“新建文件...”来创建。

![vscode_now_file](03_hello-world.assets/vscode_now_file.png)

接下来会要求输入文件名，这里输入 hello.go ，并按下回车键确认。   

.go 部分称为扩展名，是表示文件类型的重要部分。正确输入扩展名后，文件左侧的图标也会变成 三GO 的标志。

![hello-4.png](03_hello-world.assets/hello.go.png)

在创建的文件中输入以下文本。如果很麻烦，可以直接复制粘贴。另外，像往常一样，请确保输入为半角。
```Go
package main

import "fmt"

func main() {
	fmt.Println("Hello World!")
}
```
输入后，按“Ctrl+s”保存。这样就写好了第一个程序。

![hello_world.go](03_hello-world.assets/hello_world.go.png)

如果下图所示的红色波浪线（在这里位于 { 的前面）显示出来，则表示该位置存在错误。错误的处理将在后面说明，请再次确认输入的程序是否正确。

![error_sample](03_hello-world.assets/error_sample.png)

## 3.4 运行程序

现在执行程序。请在终端中输入以下命令。
```Bash
go run .
```
go run 是用于执行程序的命令， . 意味着当前目录。合并后，意思是“执行当前目录的程序！”  

执行后，如果终端输出 `Hello, World!` 则表示成功。恭喜您！🎉 

前回说明的那样，当我们想要多次执行相同的命令时，可以利用“上箭头加回车”。

## 3.5 编辑代码

如果可以顺利执行，那么这次我们尝试将程序修改为显示另一种语言。我们将用以下内容覆盖之前的程序。

```go
package main

import "fmt"

func main() {
	fmt.Println("跨越长城，走向世界！")
}
```

改的是 `hello world！` 的部分呢。

*主要的字符必须是半角字符，但夹在 `""` 之间的内部部分（称为字符串）等可以使用全角字符。具体情况稍后说明。

将此在 `go run .` 上执行时，应该会显示 `跨越长城，走向世界！` 。成功显示了吗？如果可以的话，试着显示更多不同的消息吧。

## 3.6 处理错误

“错误”将会长期陪伴你。编辑器报错，这绝不是在责怪你。它会温柔地教你错误的原因和修正方法，可能比学校的老师更亲切。

在 VSCode 中查看错误信息的方法：

- 在红色波浪线下方将鼠标光标悬停时出现的“悬停窗口”

- 最下段中点击 `✕ 1 ⚠ 0` 的部分可以显示的“问题”标签

有很多手段查看错误信息。

![vscode_show_error_message](03_hello-world.assets/vscode_show_error_message.png)

![vscode_show_error_message_2.png](03_hello-world.assets/vscode_show_error_message_2.png)



这里写着 `expected '(', found '{'` ，这意味着“接下来应该是 `(` 来，但实际来了 `{` ”。实际上，这是编辑器在告诉你在 `main` 后面加上 `()` ，就可以修正这个问题。

英语可能会让人感到有些害怕，但通常可以估摸着理解一定程度的内容。如果内容复杂，可以将错误信息完整地粘贴到 Google 中搜索，应该会有人提供解决方案。  

如果仍然感到害怕或不明白，可以利用像 ChatGPT 这样的 AI。可以在提问时附上错误的内容和程序，如果仍然有不明白的地方，可以通过对话逐步分析错误的原因。  

“报错”并不是要责怪你做错了。与其为害怕出现错误而烦恼，不如先把想不通的部分写出来试试，通过“出错”来学习正确的做法，这样往往更有效。无论成为多么熟练的程序员，作为人类，想要一次性完成想要的程序都是很困难的，因此我们非常依赖“犯错”。（其实，对于熟练的程序员来说，“有错误却没提示”的情况更让人害怕。不骗你。）  

请不要害怕错误，要依赖错误，并学会灵活运用错误。

### 明明没写错，为什么却一直提示有错？

尽管如此，有时由于错误检查的 bug 或其他原因，即使是正确的代码，也可能无法避免报错。  

在这种情况下，从命令面板（Ctrl+Shift+p）中选择 `Go: Restart Language Server` 通常可以解决问题。  

相反，如果这样做仍然无法解决，很可能是因为你漏看了某些问题。

## 3.7 基本的开发流程

因此，到目前为止，我们已经掌握了基本的开发周期。这个流程在今后也不会改变。

- 首先创建目录，并初始化模块。

- 创建文件，编写程序。

- 编辑程序。

- 执行程序。

-  如果报告有错，请阅读错误提示并进行修正。

- 以下，反复执行“编辑、执行和修正”的循环。



## 3.8 掌握程序

刚才我们通过复制粘贴写了程序，但在这里我们要了解程序的细节。不过在这里详细解释是困难的，所以现在只需了解大致即可。



此外，今后也会时不时出现“声明/declaration”这个词，简单来说就是指创建某个东西，类似于“这里有一个名为〇〇的东西！内容是这样的！”的意思。稍微有点难以解释或翻译呢……只要有个大致的感觉就可以了。

```go
package main // 声明一个包

import "fmt" // 导入模块

func main() { // 函数声明
	fmt.Println("Hello World!") // 调用函数
}
```

`package main` 表示该程序属于 `main` 包。包是将程序捆绑在一起的单位，位于同一目录中的程序基本上属于同一包。

`import "fmt"` 是用于导入其他包功能的导入语句。 `fmt` 包提供了在屏幕上显示文本的 `Println` 等函数。

`func main() {` 到 `}` 是 `main` 函数的声明。函数是指某种处理的集合。

`main` 包的 `main` 函数是一个特殊的存在，表示程序的起点。可以认为在 `go run .` 中执行的处理就是这个 `main` 函数的内容。试着将包名或函数名中的任意一个从 `main` 改为适当的名称，应该可以确认 `go run .` 会出现错误而无法执行。  

突然出现了很多新术语，具体内容稍后会解释，现在只需了解“原来有这样的东西”就可以了。

## 3.9 程序注释

`//` 到行末的部分是程序中不被识别的注释（或者说“备注”）。注释内容可以使用全角字符。虽然有无都不会影响执行，但有效地使用，可以使程序更易读。

使用 `/* */` 可以写多行注释（块注释）。与 `//` 相比，使用的机会较少，但偶尔会用到。  

```go
这不是注释 // 这是单行注释
这也不是注释

/*
多行注释
不止一行
也叫做“块注释”
*/

// 在 GO 程序里面
// 很多人习惯
// 用好几行单行注释
// 来代替多行注释
// （仅是个人感想）
```

评论具有“不会影响程序”的特性，可以作为“文档”或“指示”用于除读者注释以外的各种目的，但这种评论的使用方式，将在合适的时候说明。

## 本章总结

- 要在 Go 中创建新程序，需要创建目录并初始化模块。
- 「编写代码，用 `go run .` 上运行，进行修正」是基本的流程。
- 错误是和蔼的老师，值得尊敬与感激。如果仍然搞不明白，可以求助 AI。
